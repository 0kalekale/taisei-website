{% extends "main.html" %}
{% block title %}Download{% endblock %}

{% macro arch_help(stable) %}
<p><a href="#obs_arch{% if stable %}_stable{% endif %}">Arch Linux</a></p>
<div class="code-hidden" id="obs_arch{% if stable %}_stable{% endif %}">
    [taisei_{% if stable %}stable{% else %}dev{% endif %}]<br/>
    Server = https://download.opensuse.org/repositories/home:/lachs0r:/taisei{% if stable %}:/stable{% endif %}/Arch_Extra/$arch
</div>
{% endmacro %}

{% macro deb_help(distro, stable) %}
<a href="#{{ distro|replace("/","_") }}{% if stable %}_stable{% endif %}">{{ distro|replace("xUbuntu ", "")|replace("Debian ", "") }}</a>
<div class="code-hidden" id="{{ distro|replace("/","_") }}{% if stable %}_stable{% endif %}">
    sudo add-apt-repository "deb https://download.opensuse.org/repositories/home:/lachs0r:/taisei{% if stable %}:/stable{% endif %}/{{ distro|replace(" ", "_") }}/ ./"<br/>
    wget -q -O- https://download.opensuse.org/repositories/home:/lachs0r:/taisei{% if stable %}:/stable{% endif %}/{{ distro|replace(" ", "_") }}/Release.key | sudo apt-key add -<br/>
    sudo apt-get update<br/>
    sudo apt-get install taisei
</div>
{% endmacro %}

{% macro suse_help(distro, stable) %}
<a href="#{{ distro|replace(" ","_") }}{% if stable %}_stable{% endif %}">{% if "Ports" in distro %}(ARM){% else %}{{ distro|replace("openSUSE ", "") }}{% endif %}</a>
<div class="code-hidden" id="{{ distro|replace(" ","_") }}{% if stable %}_stable{% endif %}">
    zypper ar -fr https://download.opensuse.org/repositories/home:/lachs0r:/taisei{% if stable %}:/stable{% endif %}/{{ distro|replace(" ", "_") }}/home:lachs0r:taisei{% if stable %}:stable{% endif %}.repo<br/>
    zypper in taisei
</div>
{% endmacro %}

{% macro fedora_help(distro, stable) %}
<a href="#{{ distro|replace(" ","_") }}{% if stable %}_stable{% endif %}">{{ distro|replace("Fedora ", "") }}</a>
<div class="code-hidden" id="{{ distro|replace(" ","_") }}{% if stable %}_stable{% endif %}">
    dnf config-manager --add-repo https://download.opensuse.org/repositories/home:/lachs0r:/taisei{% if stable %}:/stable{% endif %}/{{ distro|replace(" ", "_") }}/home:lachs0r:taisei{% if stable %}:stable{% endif %}.repo<br/>
    dnf install taisei
</div>
{% endmacro %}

{% block content %}
            <h1>Download</h1>
            <p>
                We have some binaries for Windows and OS X. For Linux, you can either look
                for a package in your distribution or build Taisei from <a href="#source">source</a>
                (Should be pretty straightforward).
            </p>
            <p>If you find any mistakes, please contact us.</p>

            <h2>Windows</h2>
            <h3>Stable</h3>
            <ul>
                <li><a href="https://github.com/taisei-project/taisei/releases/download/v1.1.1/Taisei-1.1.1-win64.exe">v1.1.1 64-bit (installer)</a></li>
                <li><a href="https://github.com/taisei-project/taisei/releases/download/v1.1.1/Taisei-1.1.1-win32.exe">v1.1.1 32-bit (installer)</a></li>
                <br />
                <li><a href="https://github.com/taisei-project/taisei/releases/download/v1.1.1/Taisei-1.1.1-win64.7z">v1.1.1 64-bit (7zip)</a></li>
                <li><a href="https://github.com/taisei-project/taisei/releases/download/v1.1.1/Taisei-1.1.1-win32.7z">v1.1.1 32-bit (7zip)</a></li>
            </ul>
            If in doubt, try the 64-bit installer first.
            <hr />
            <h2>Linux</h2>
            <h3>Arch Linux</h3>
            There are <a href="https://aur.archlinux.org/packages/taisei/">taisei</a>
            and <a href="https://aur.archlinux.org/packages/taisei-git/">taisei-git</a>
            PKGBUILDs available on <a href="http://aur.archlinux.org/">AUR</a>.
            <h3>Open Build Service</h3>
            We also provide packages for a variety of distributions at Open Build Service.
            {% for title, stable in [("Stable", True), ("Development Snapshots", False)] %}
            <h4>{{ title }}</h4>
            {{ arch_help(stable)|indent(4*3)|safe }}
            <p>Debian</p>
            {{ deb_help("Debian 9.0", stable)|indent(4*3)|safe }}
            <p>Fedora</p>
            {% for distro in ["Fedora 26", "Fedora Rawhide"] %}
            {{ fedora_help(distro, stable)|indent(4*3)|safe }}
            {% endfor %}
            <p>openSUSE</p>
            {% for distro in [
                "openSUSE Tumbleweed",
                "openSUSE Leap 42.3", "openSUSE Leap 42.3 Ports",
                "openSUSE Leap 42.2", "openSUSE Leap 42.2 Ports",
                "openSUSE Leap 42.1",
                "openSUSE Factory ARM",
                "openSUSE Factory PowerPC",
            ] %}
            {{ suse_help(distro, stable)|indent(4*3)|safe }}
            {% endfor %}
            <p>Ubuntu</p>
            {% for distro in ["xUbuntu 17.10", "xUbuntu 17.04"] %}
            {{ deb_help(distro, stable)|indent(4*3)|safe }}
            {% endfor %}
            {% endfor %}
            <hr />
            <h2>macOS</h2>
            <ul>
                <li><a href="https://github.com/taisei-project/taisei/releases/download/v1.1.1/Taisei-1.1.1-macOS.dmg">v1.1.1 64-bit (macOS 10.7 or later required)</a></li>
            </ul>
            <hr />
            <h2 id="source">Source Code</h2>
            Building Taisei is easy (if you are on Linux).
            Download the source code and follow the instructions in <tt>README.md</tt>.
            Feel free to contact us if you have problems.
            <h3>Stable</h3>
            <ul>
                <li><a href="https://github.com/taisei-project/taisei/tarball/v1.1.1">v1.1.1</a></li>
            </ul>
            <h3>Unstable</h3>
            <tt>git clone <a href="https://github.com/taisei-project/taisei">https://github.com/taisei-project/taisei</a></tt>
{% endblock %}
